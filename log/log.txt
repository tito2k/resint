Array
(
    [fecha] => 02/11/2010
    [destino] => S
    [idSeccion] => 1
    [idFuncionario] => 
    [idVehiculo] => 
    [almacen] => 53
    [observaciones] => 
    [aceptarSolicitud] => ACEPTAR
    [idSesion] => e98e60fe-37f9-102e-9459-001f29ae8127
    [datos] => []
)

Array
(
    [fecha] => 02/11/2010
    [destino] => S
    [idSeccion] => 2
    [idFuncionario] => 
    [idVehiculo] => 
    [almacen] => 53
    [observaciones] => 
    [aceptarSolicitud] => ACEPTAR
    [idSesion] => e98e60fe-37f9-102e-9459-001f29ae8127
    [datos] => []
)

INSERT INTO transaccion
       VALUES (20100024,2,1,'',53,'2010-11-02','2010-11-02','','S')
Array
(
    [fecha] => 02/11/2010
    [destino] => S
    [idSeccion] => 1
    [idFuncionario] => 
    [idVehiculo] => 
    [almacen] => 52
    [observaciones] => 
    [aceptarSolicitud] => ACEPTAR
    [idSesion] => e98e60fe-37f9-102e-9459-001f29ae8127
    [datos] => []
)


INSERT INTO transaccion
       VALUES (20100025,2,1,'',52,'2010-11-02','2010-11-02','','S')
Array
(
    [fecha] => 02/11/2010
    [destino] => S
    [idSeccion] => 1
    [idFuncionario] => 
    [idVehiculo] => 
    [almacen] => 52
    [observaciones] => 
    [aceptarSolicitud] => ACEPTAR
    [idSesion] => e98e60fe-37f9-102e-9459-001f29ae8127
    [datos] => []
)

1
INSERT INTO transaccion
       VALUES (20100026,2,1,'1',52,'2010-11-02','2010-11-02','','S')
Array
(
    [fecha] => 02/11/2010
    [destino] => S
    [idSeccion] => 2
    [idFuncionario] => 
    [idVehiculo] => 
    [almacen] => 53
    [observaciones] => <p>nueva solicitud</p>
    [aceptarSolicitud] => ACEPTAR
    [idSesion] => 214d2a5e-37fd-102e-9459-001f29ae8127
    [datos] => [{\"idarticulo\":\"1000011\",\"cantidad\":\"100\",\"aprueba\":\"undefined\",\"autoriza\":\"undefined\"},{\"idarticulo\":\"1000013\",\"cantidad\":\"55\",\"aprueba\":\"undefined\",\"autoriza\":\"undefined\"}]
)

2
INSERT INTO transaccion
       VALUES (20100027,2,1,'2',53,'2010-11-02','2010-11-02','<p>nueva solicitud</p>','S')
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100027 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100027 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100028 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100028 AND ta.idestado = 2
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN transaccionarticulo en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo AND en.idestado = 5INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado IN (3,5)
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN transaccionarticulo en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo AND en.idestado = 5 INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado IN (3,5)
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN transaccionarticulo en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo AND en.idestado = 5 INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN transaccionarticulo en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo AND en.idestado = 5 INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN transaccionarticulo en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo AND en.idestado = 5 INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN transaccionarticulo en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo AND en.idestado = 5 INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN transaccionarticulo en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo AND en.idestado = 5 INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN transaccionarticulo en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo AND en.idestado = 5 INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN transaccionarticulo en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo AND en.idestado = 5 INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN transaccionarticulo en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo AND en.idestado = 5 INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN (SELECT idtransaccion, idarticulo, SUM(cantidad) AS cantidad FROM transaccionarticulo WHERE idestado = 5 GROUP BY idarticulo) en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo  INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN (SELECT idtransaccion, idarticulo, SUM(cantidad) AS cantidad FROM transaccionarticulo WHERE idestado = 5 GROUP BY idarticulo) en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo  INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN (SELECT idtransaccion, idarticulo, SUM(cantidad) AS cantidad FROM transaccionarticulo WHERE idestado = 5 GROUP BY idarticulo) en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo  INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100028 AND ta.idestado = 2
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN (SELECT idtransaccion, idarticulo, SUM(cantidad) AS cantidad FROM transaccionarticulo WHERE idestado = 5 GROUP BY idarticulo) en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo  INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100028 AND au.idestado = 3
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100028 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100028 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100028 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100028 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100028 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100015 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100028 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100017 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100028 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100028 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100015 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100014 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100015 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100015 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100015 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100015 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100015 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100014 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100018 AND ta.idestado = 2
SELECT ta.idarticulo,a.nombre, ta.cantidad,ta.cantidad AS aprobar,'SI' AS autoriza, concat('idtransaccion=',ta.idtransaccion,' AND idarticulo=',ta.idarticulo) AS id FROM transaccionarticulo ta INNER JOIN articulo a ON a.idarticulo = ta.idarticulo WHERE ta.idtransaccion = 20100018 AND ta.idestado = 2
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN (SELECT idtransaccion, idarticulo, SUM(cantidad) AS cantidad FROM transaccionarticulo WHERE idestado = 5 GROUP BY idarticulo) en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo  INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100021 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN (SELECT idtransaccion, idarticulo, SUM(cantidad) AS cantidad FROM transaccionarticulo WHERE idestado = 5 GROUP BY idarticulo) en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo  INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100021 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN (SELECT idtransaccion, idarticulo, SUM(cantidad) AS cantidad FROM transaccionarticulo WHERE idestado = 5 GROUP BY idarticulo) en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo  INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100021 AND au.idestado = 3
SELECT au.idarticulo,a.nombre, au.cantidad,ifnull(en.cantidad,0) AS entregado,au.cantidad - ifnull(en.cantidad,0) AS entregar, concat('idtransaccion=',au.idtransaccion,' AND idarticulo=',au.idarticulo) AS id FROM transaccionarticulo au LEFT JOIN (SELECT idtransaccion, idarticulo, SUM(cantidad) AS cantidad FROM transaccionarticulo WHERE idestado = 5 GROUP BY idarticulo) en ON au.idtransaccion = en.idtransaccion  AND au.idarticulo = en.idarticulo  INNER JOIN articulo a ON a.idarticulo = au.idarticulo WHERE au.idtransaccion = 20100021 AND au.idestado = 3
